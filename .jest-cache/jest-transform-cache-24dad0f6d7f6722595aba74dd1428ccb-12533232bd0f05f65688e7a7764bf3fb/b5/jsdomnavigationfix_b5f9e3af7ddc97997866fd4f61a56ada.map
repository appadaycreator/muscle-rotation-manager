{"version":3,"names":["setupJSDOMNavigationFix","window","originalConsoleError","console","error","_len","arguments","length","args","Array","_key","includes","apply","originalConsoleLog","log","_len2","_key2","location","assign","jest","fn","replace","reload","process","env","NODE_ENV","JEST_WORKER_ID","mockNavigation","url","href","mockRedirect"],"sources":["jsdom-navigation-fix.js"],"sourcesContent":["// JSDOMナビゲーション制限を回避するためのユーティリティ\n// CI/CDパイプラインでのテスト安定性を向上させる\n\n/**\n * JSDOMのナビゲーション制限を回避するためのセットアップ\n */\nexport function setupJSDOMNavigationFix() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  // コンソールエラーを抑制（JSDOMのナビゲーションエラーを無視）\n  const originalConsoleError = console.error;\n  console.error = (...args) => {\n    // JSDOMのナビゲーションエラーを抑制\n    if (\n      args[0] &&\n      typeof args[0] === 'string' &&\n      args[0].includes('Not implemented: navigation')\n    ) {\n      return;\n    }\n    originalConsoleError.apply(console, args);\n  };\n\n  // コンソールログも抑制（テスト環境での不要なログを削減）\n  const originalConsoleLog = console.log;\n  console.log = (...args) => {\n    // テスト環境でのナビゲーションログを抑制\n    if (\n      args[0] &&\n      typeof args[0] === 'string' &&\n      args[0].includes('Navigation skipped in test environment')\n    ) {\n      return;\n    }\n    originalConsoleLog.apply(console, args);\n  };\n\n  // 既存のlocationが存在する場合は、そのメソッドをモック\n  if (window.location) {\n    // 既存のlocationオブジェクトのメソッドをモック\n    if (typeof window.location.assign !== 'function') {\n      window.location.assign = jest.fn();\n    }\n    if (typeof window.location.replace !== 'function') {\n      window.location.replace = jest.fn();\n    }\n    if (typeof window.location.reload !== 'function') {\n      window.location.reload = jest.fn();\n    }\n  }\n\n  // テスト環境フラグを設定\n  if (typeof process !== 'undefined') {\n    process.env.NODE_ENV = 'test';\n    process.env.JEST_WORKER_ID = '1';\n  }\n}\n\n/**\n * テスト用のナビゲーション関数\n */\nexport function mockNavigation(url) {\n  if (typeof window !== 'undefined' && window.location) {\n    try {\n      window.location.href = url;\n    } catch (error) {\n      // JSDOMの制限により失敗した場合はassignメソッドを使用\n      if (window.location.assign) {\n        window.location.assign(url);\n      }\n    }\n  }\n}\n\n/**\n * テスト用のリダイレクト関数\n */\nexport function mockRedirect(url) {\n  if (typeof window !== 'undefined') {\n    try {\n      window.location.href = url;\n    } catch (error) {\n      // JSDOMの制限により失敗した場合はreplaceメソッドを使用\n      if (window.location.replace) {\n        window.location.replace(url);\n      }\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}