{"version":3,"names":["_helpers","require","_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","a","n","TypeError","_defineProperties","e","r","t","length","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","i","_toPrimitive","toPrimitive","call","String","Number","OnboardingManager","exports","storageKey","currentStep","steps","id","title","content","target","position","isActive","overlay","tooltip","value","startOnboarding","hasCompleted","hasCompletedOnboarding","console","log","createOverlay","showStep","error","completed","localStorage","getItem","concat","warn","removeOverlay","document","createElement","style","cssText","body","appendChild","stepIndex","completeOnboarding","step","createTooltip","highlightTarget","_this","removeTooltip","innerHTML","nextBtn","querySelector","prevBtn","addEventListener","nextStep","prevStep","positionTooltip","targetElement","rect","getBoundingClientRect","tooltipRect","top","left","height","width","bottom","right","Math","max","min","window","innerHeight","innerWidth","transform","zIndex","outline","outlineOffset","borderRadius","removeHighlight","highlightedElements","querySelectorAll","forEach","element","skipOnboarding","showNotification","setItem","Date","toISOString","remove","resetOnboarding","removeItem","getOnboardingStatus","completedAt","totalSteps","onboardingManager"],"sources":["onboardingManager.js"],"sourcesContent":["// onboardingManager.js - オンボーディング管理ユーティリティ\n\nimport { showNotification } from './helpers.js';\n\n/**\n * オンボーディング管理クラス\n * 初回ユーザー向けのガイド機能を提供\n */\nexport class OnboardingManager {\n  constructor() {\n    this.storageKey = 'muscleRotationOnboarding';\n    this.currentStep = 0;\n    this.steps = [\n      {\n        id: 'welcome',\n        title: 'MuscleRotationManagerへようこそ！',\n        content: 'このアプリで筋トレの記録と分析を効率的に行いましょう。',\n        target: null,\n        position: 'center',\n      },\n      {\n        id: 'dashboard',\n        title: 'ダッシュボード',\n        content: 'ここで全体の進捗と統計を確認できます。',\n        target: '#dashboard-link',\n        position: 'bottom',\n      },\n      {\n        id: 'workout',\n        title: 'ワークアウト記録',\n        content: '新しいワークアウトを記録して進捗を追跡しましょう。',\n        target: '#workout-link',\n        position: 'bottom',\n      },\n      {\n        id: 'exercises',\n        title: 'エクササイズデータベース',\n        content:\n          '豊富なエクササイズから選択して、カスタムエクササイズも追加できます。',\n        target: '#exercises-link',\n        position: 'bottom',\n      },\n      {\n        id: 'analysis',\n        title: '分析・レポート',\n        content: '詳細な分析とレポートでトレーニングの効果を確認できます。',\n        target: '#analysis-link',\n        position: 'bottom',\n      },\n      {\n        id: 'calendar',\n        title: 'カレンダー',\n        content: 'トレーニング履歴をカレンダー形式で確認できます。',\n        target: '#calendar-link',\n        position: 'bottom',\n      },\n    ];\n    this.isActive = false;\n    this.overlay = null;\n    this.tooltip = null;\n  }\n\n  /**\n   * オンボーディングを開始\n   */\n  startOnboarding() {\n    try {\n      const hasCompleted = this.hasCompletedOnboarding();\n      if (hasCompleted) {\n        console.log('Onboarding already completed');\n        return;\n      }\n\n      this.isActive = true;\n      this.currentStep = 0;\n      this.createOverlay();\n      this.showStep(this.currentStep);\n\n      console.log('Onboarding started');\n    } catch (error) {\n      console.error('Failed to start onboarding:', error);\n    }\n  }\n\n  /**\n   * オンボーディングが完了済みかチェック\n   * @returns {boolean} 完了済みかどうか\n   */\n  hasCompletedOnboarding() {\n    try {\n      const completed = localStorage.getItem(`${this.storageKey}_completed`);\n      return completed === 'true';\n    } catch (error) {\n      console.warn('Failed to check onboarding status:', error);\n      return false;\n    }\n  }\n\n  /**\n   * オーバーレイを作成\n   */\n  createOverlay() {\n    // 既存のオーバーレイを削除\n    this.removeOverlay();\n\n    this.overlay = document.createElement('div');\n    this.overlay.id = 'onboarding-overlay';\n    this.overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.7);\n      z-index: 9999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    `;\n\n    document.body.appendChild(this.overlay);\n  }\n\n  /**\n   * ステップを表示\n   * @param {number} stepIndex - ステップインデックス\n   */\n  showStep(stepIndex) {\n    if (stepIndex >= this.steps.length) {\n      this.completeOnboarding();\n      return;\n    }\n\n    const step = this.steps[stepIndex];\n    this.createTooltip(step);\n    this.highlightTarget(step);\n  }\n\n  /**\n   * ツールチップを作成\n   * @param {Object} step - ステップ情報\n   */\n  createTooltip(step) {\n    // 既存のツールチップを削除\n    this.removeTooltip();\n\n    this.tooltip = document.createElement('div');\n    this.tooltip.id = 'onboarding-tooltip';\n    this.tooltip.style.cssText = `\n      position: fixed;\n      background: white;\n      border-radius: 8px;\n      padding: 20px;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);\n      max-width: 400px;\n      z-index: 10000;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n\n    this.tooltip.innerHTML = `\n      <div style=\"margin-bottom: 15px;\">\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937; font-size: 18px; font-weight: 600;\">\n          ${step.title}\n        </h3>\n        <p style=\"margin: 0; color: #6b7280; font-size: 14px; line-height: 1.5;\">\n          ${step.content}\n        </p>\n      </div>\n      <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n        <div style=\"color: #9ca3af; font-size: 12px;\">\n          ${this.currentStep + 1} / ${this.steps.length}\n        </div>\n        <div>\n          ${\n            this.currentStep > 0\n              ? `\n            <button id=\"onboarding-prev\" style=\"\n              background: #f3f4f6;\n              border: none;\n              padding: 8px 16px;\n              border-radius: 6px;\n              margin-right: 8px;\n              cursor: pointer;\n              font-size: 14px;\n            \">前へ</button>\n          `\n              : ''\n          }\n          <button id=\"onboarding-next\" style=\"\n            background: #3b82f6;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 6px;\n            cursor: pointer;\n            font-size: 14px;\n          \">${this.currentStep === this.steps.length - 1 ? '完了' : '次へ'}</button>\n        </div>\n      </div>\n    `;\n\n    // イベントリスナーを追加\n    const nextBtn = this.tooltip.querySelector('#onboarding-next');\n    const prevBtn = this.tooltip.querySelector('#onboarding-prev');\n\n    if (nextBtn) {\n      nextBtn.addEventListener('click', () => this.nextStep());\n    }\n    if (prevBtn) {\n      prevBtn.addEventListener('click', () => this.prevStep());\n    }\n\n    document.body.appendChild(this.tooltip);\n    this.positionTooltip(step);\n  }\n\n  /**\n   * ツールチップを配置\n   * @param {Object} step - ステップ情報\n   */\n  positionTooltip(step) {\n    if (!this.tooltip) return;\n\n    if (step.target) {\n      const targetElement = document.querySelector(step.target);\n      if (targetElement) {\n        const rect = targetElement.getBoundingClientRect();\n        const tooltipRect = this.tooltip.getBoundingClientRect();\n\n        let top, left;\n\n        switch (step.position) {\n          case 'top':\n            top = rect.top - tooltipRect.height - 10;\n            left = rect.left + (rect.width - tooltipRect.width) / 2;\n            break;\n          case 'bottom':\n            top = rect.bottom + 10;\n            left = rect.left + (rect.width - tooltipRect.width) / 2;\n            break;\n          case 'left':\n            top = rect.top + (rect.height - tooltipRect.height) / 2;\n            left = rect.left - tooltipRect.width - 10;\n            break;\n          case 'right':\n            top = rect.top + (rect.height - tooltipRect.height) / 2;\n            left = rect.right + 10;\n            break;\n          default:\n            top = rect.bottom + 10;\n            left = rect.left + (rect.width - tooltipRect.width) / 2;\n        }\n\n        // 画面外に出ないように調整\n        top = Math.max(\n          10,\n          Math.min(top, window.innerHeight - tooltipRect.height - 10)\n        );\n        left = Math.max(\n          10,\n          Math.min(left, window.innerWidth - tooltipRect.width - 10)\n        );\n\n        this.tooltip.style.top = `${top}px`;\n        this.tooltip.style.left = `${left}px`;\n      }\n    } else {\n      // 中央配置\n      this.tooltip.style.top = '50%';\n      this.tooltip.style.left = '50%';\n      this.tooltip.style.transform = 'translate(-50%, -50%)';\n    }\n  }\n\n  /**\n   * ターゲット要素をハイライト\n   * @param {Object} step - ステップ情報\n   */\n  highlightTarget(step) {\n    if (!step.target) return;\n\n    const targetElement = document.querySelector(step.target);\n    if (targetElement) {\n      targetElement.style.position = 'relative';\n      targetElement.style.zIndex = '10001';\n      targetElement.style.outline = '2px solid #3b82f6';\n      targetElement.style.outlineOffset = '2px';\n      targetElement.style.borderRadius = '4px';\n    }\n  }\n\n  /**\n   * ハイライトを削除\n   */\n  removeHighlight() {\n    const highlightedElements = document.querySelectorAll(\n      '[style*=\"outline: 2px solid #3b82f6\"]'\n    );\n    highlightedElements.forEach((element) => {\n      element.style.outline = '';\n      element.style.outlineOffset = '';\n      element.style.borderRadius = '';\n      element.style.zIndex = '';\n    });\n  }\n\n  /**\n   * 次のステップへ\n   */\n  nextStep() {\n    this.removeHighlight();\n    this.currentStep++;\n    this.showStep(this.currentStep);\n  }\n\n  /**\n   * 前のステップへ\n   */\n  prevStep() {\n    this.removeHighlight();\n    this.currentStep--;\n    this.showStep(this.currentStep);\n  }\n\n  /**\n   * オンボーディングをスキップ\n   */\n  skipOnboarding() {\n    this.completeOnboarding();\n    showNotification('オンボーディングをスキップしました', 'info');\n  }\n\n  /**\n   * オンボーディングを完了\n   */\n  completeOnboarding() {\n    try {\n      localStorage.setItem(`${this.storageKey}_completed`, 'true');\n      localStorage.setItem(\n        `${this.storageKey}_completedAt`,\n        new Date().toISOString()\n      );\n\n      this.removeOverlay();\n      this.removeTooltip();\n      this.removeHighlight();\n\n      this.isActive = false;\n\n      showNotification('オンボーディングが完了しました！', 'success');\n      console.log('Onboarding completed');\n    } catch (error) {\n      console.error('Failed to complete onboarding:', error);\n    }\n  }\n\n  /**\n   * オーバーレイを削除\n   */\n  removeOverlay() {\n    if (this.overlay) {\n      this.overlay.remove();\n      this.overlay = null;\n    }\n  }\n\n  /**\n   * ツールチップを削除\n   */\n  removeTooltip() {\n    if (this.tooltip) {\n      this.tooltip.remove();\n      this.tooltip = null;\n    }\n  }\n\n  /**\n   * オンボーディングをリセット\n   */\n  resetOnboarding() {\n    try {\n      localStorage.removeItem(`${this.storageKey}_completed`);\n      localStorage.removeItem(`${this.storageKey}_completedAt`);\n      console.log('Onboarding reset');\n    } catch (error) {\n      console.error('Failed to reset onboarding:', error);\n    }\n  }\n\n  /**\n   * オンボーディング状態を取得\n   * @returns {Object} オンボーディング状態\n   */\n  getOnboardingStatus() {\n    try {\n      const completed = this.hasCompletedOnboarding();\n      const completedAt = localStorage.getItem(\n        `${this.storageKey}_completedAt`\n      );\n\n      return {\n        completed,\n        completedAt: completedAt ? new Date(completedAt) : null,\n        isActive: this.isActive,\n        currentStep: this.currentStep,\n        totalSteps: this.steps.length,\n      };\n    } catch (error) {\n      console.error('Failed to get onboarding status:', error);\n      return {\n        completed: false,\n        completedAt: null,\n        isActive: false,\n        currentStep: 0,\n        totalSteps: this.steps.length,\n      };\n    }\n  }\n}\n\n// シングルトンインスタンスをエクスポート\nexport const onboardingManager = new OnboardingManager();\n"],"mappings":"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","ignoreList":[]}